---
title: Spring-AOP
category: 大三下
date: 2022-06-29 19:26:09
tags:
---

##　静态代理模式

1. SpringAOP和SpringMVC
2. 代理模式的分类
   1. 静态代理
      1. 角色分析
         1. 抽象角色：接口、抽象类
         2. 真实角色：被代理的角色
         3. 代理角色：代理真实角色，代理真实角色之后，一般会做一些附属操作
         4. 客户：访问代理对象的人
      2. 静态代理的好处
         1. 真实操作更加纯粹，不用关注公共事务
         2. 公共事务交给了代理角色，实现了业务分工
         3. 公共业务发生扩展时，方便集中管理
      3. 静态代理的缺点
         1. 一个真实角色就会产生一个代理角色：代码量会翻倍，开发效率会变低
   2. 动态代理
      1. 角色一样
      2. 代理类是动态生成的，不是直接写好的
      3. 两大类：基于接口的动态代理，基于类的动态代理
         1. 基于接口：JDK动态代理
         2. 基于类：cglib
         3. java字节码实现：javasist
         4. 需要了解两个类：Proxy:代理，InvocationHandler:调用处理程序
      4. 动态代理的好处
         1. 真实操作更加纯粹，不用关注公共事务
         2. 公共事务交给了代理角色，实现了业务分工
         3. 公共业务发生扩展时，方便集中管理
         4. 一个动态代理类代理的是一个接口，一般对应的是一类业务
         5. 一个动态代理类可以代理多个类，只要实现了同一个接口即可
3. 代码步骤：
   1. 接口
   2. 真实角色
   3. 代理角色
   4. 客户端访问代理角色

---

## AOP

1. AOP（Aspect Oriented Programming）意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。
2. AOP在Spring中的作用
   1. ==提供声明式事务；允许用户自定义切面==
   2. 横切关注点：跨越应用程序多个模块的方法或功能。即是，与我们业务逻辑无关的，但是我们需要关注的部分，就是横切关注点。如日志 , 安全 , 缓存 , 事务等等 ….
   3. 切面（ASPECT）：横切关注点 被模块化 的特殊对象。即，它是一个类。
   4. 通知（Advice）：切面必须要完成的工作。即，它是类中的一个方法。
   5. 目标（Target）：被通知对象。
   6. 代理（Proxy）：向目标对象应用通知之后创建的对象。
   7. 切入点（PointCut）：切面通知 执行的 “地点”的定义。
   8. 连接点（JointPoint）：与切入点匹配的执行点。
3. 使用Spring实现AOP
   1. AOP织入，导入包。
   2. 方法一：使用Spring接口【主要是SpringAPI接口实现】
   3. 方法二：使用自定义类来实现AOP【主要是切面定义】

---

Mybatis回忆

1. 编写实体类
2. 编写核心配置文件
3. 编写接口
4. 编写Mapper.xml
5. 测试

---

**TODO:**此处，狂神说的Spring p24整合mybatis方式一 25整合mybatis方式二，暂时跳过。等学完mybatis再回来。

---

## Spring声明式事务

1. 事务：把一组事务当成一个业务来做；要么都成功，要么都失败。
2. 事务在项目开发中，涉及到数据的一致性，不能马虎
3. 事务的ACID原则：
   1. 原子性、
   2. 一致性、
   3. 隔离性：多个业务可能操作同一个资源，防止数据损坏。
   4. 持久性：事务一旦提交，无论系统发生什么问题，结果都不会再被影响
4. spring中的事务管理
   1. 声明式事务：AOP
   2. 编程式事务：需要在代码中，进行事务的管理

5. 为什么需要事务？
   1. 如果不配置事务，可能存在数据提交不一致的情况下；
   2. 如果我们不在spring中去配置声明式事务，我们就需要在代码中手动配置事务！
   3. 事务在项目的开发中十分重要，涉及到数据的一致性和完整性问题，不容马虎！！


